<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pre-rendered Chart: by_status - Data Explorer</title>
  <style>
    :root {
      --malloy-font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --malloy-border-color: #e2e8f0;
      --malloy-text-primary: #1e293b;
      --malloy-text-secondary: #64748b;
    }

    * { box-sizing: border-box; }

    body {
      font-family: var(--malloy-font-family);
      margin: 0;
      padding: 0;
      background: #fff;
      color: var(--malloy-text-primary);
    }

    .result-page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
    }

    .result-header {
      margin-bottom: 24px;
      border-bottom: 1px solid var(--malloy-border-color);
      padding-bottom: 16px;
    }

    .result-title {
      font-size: 24px;
      font-weight: 600;
      margin: 0 0 4px 0;
    }

    .result-subtitle {
      font-size: 14px;
      color: var(--malloy-text-secondary);
      margin: 0;
    }

    .prerender-notice {
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 24px;
      font-size: 13px;
      color: #1e40af;
    }

    /* Vega chart container */
    .malloy-chart {
      background: #fff;
      border: 1px solid var(--malloy-border-color);
      border-radius: 8px;
      padding: 20px;
    }

    .malloy-chart svg {
      display: block;
      max-width: 100%;
      height: auto;
    }

    /* Chart legend */
    .chart-legend {
      display: flex;
      gap: 16px;
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid var(--malloy-border-color);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
    }

    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 2px;
    }

    .interactivity-notice {
      margin-top: 16px;
      padding: 12px;
      background: #fef3c7;
      border-radius: 6px;
      font-size: 12px;
      color: #92400e;
    }
  </style>
</head>
<body>
  <div class="result-page">
    <div class="prerender-notice">
      This is a pre-rendered chart using SVG export from Vega. No JavaScript required for display.
    </div>

    <div class="result-header">
      <h1 class="result-title">Invoice Status Distribution</h1>
      <p class="result-subtitle">Bar Chart - # bar_chart annotation</p>
    </div>

    <div class="malloy-chart">
      <!--
        This SVG represents what Vega's view.toSVG() would output.
        In production, this would be generated by running:
        const svg = await vegaView.toSVG();
      -->
      <svg viewBox="0 0 500 320" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <style>
            .bar-label { font: 12px var(--malloy-font-family); fill: #64748b; }
            .axis-label { font: 11px var(--malloy-font-family); fill: #64748b; }
            .axis-title { font: 13px var(--malloy-font-family); font-weight: 600; fill: #1e293b; }
            .grid-line { stroke: #e2e8f0; stroke-width: 1; }
          </style>
        </defs>

        <!-- Background -->
        <rect width="500" height="320" fill="white"/>

        <!-- Title -->
        <text x="250" y="25" text-anchor="middle" class="axis-title">Invoice Count by Status</text>

        <!-- Y-axis gridlines -->
        <g class="grid">
          <line x1="80" y1="60" x2="480" y2="60" class="grid-line"/>
          <line x1="80" y1="110" x2="480" y2="110" class="grid-line"/>
          <line x1="80" y1="160" x2="480" y2="160" class="grid-line"/>
          <line x1="80" y1="210" x2="480" y2="210" class="grid-line"/>
          <line x1="80" y1="260" x2="480" y2="260" class="grid-line"/>
        </g>

        <!-- Y-axis labels -->
        <g class="y-axis">
          <text x="70" y="64" text-anchor="end" class="axis-label">2000</text>
          <text x="70" y="114" text-anchor="end" class="axis-label">1500</text>
          <text x="70" y="164" text-anchor="end" class="axis-label">1000</text>
          <text x="70" y="214" text-anchor="end" class="axis-label">500</text>
          <text x="70" y="264" text-anchor="end" class="axis-label">0</text>
        </g>

        <!-- Y-axis title (rotated) -->
        <text transform="rotate(-90)" x="-160" y="25" class="axis-title">Invoice Count</text>

        <!-- Bars -->
        <g class="bars">
          <!-- Paid: 1847 invoices (scale: 2000 max, 200px height) -->
          <rect x="110" y="75" width="100" height="185" fill="#22c55e" rx="4"/>
          <text x="160" y="68" text-anchor="middle" class="bar-label">1,847</text>

          <!-- Pending: 523 invoices -->
          <rect x="230" y="208" width="100" height="52" fill="#eab308" rx="4"/>
          <text x="280" y="201" text-anchor="middle" class="bar-label">523</text>

          <!-- Overdue: 189 invoices -->
          <rect x="350" y="241" width="100" height="19" fill="#ef4444" rx="4"/>
          <text x="400" y="234" text-anchor="middle" class="bar-label">189</text>
        </g>

        <!-- X-axis -->
        <line x1="80" y1="260" x2="480" y2="260" stroke="#94a3b8" stroke-width="1"/>

        <!-- X-axis labels -->
        <g class="x-axis">
          <text x="160" y="280" text-anchor="middle" class="axis-label">Paid</text>
          <text x="280" y="280" text-anchor="middle" class="axis-label">Pending</text>
          <text x="400" y="280" text-anchor="middle" class="axis-label">Overdue</text>
        </g>

        <!-- X-axis title -->
        <text x="280" y="305" text-anchor="middle" class="axis-title">Status</text>
      </svg>

      <!-- Legend -->
      <div class="chart-legend">
        <div class="legend-item">
          <div class="legend-color" style="background: #22c55e;"></div>
          <span>Paid (72%)</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #eab308;"></div>
          <span>Pending (20%)</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #ef4444;"></div>
          <span>Overdue (7%)</span>
        </div>
      </div>
    </div>

    <div class="interactivity-notice">
      <strong>Note:</strong> This is a static SVG export. The following interactive features are not available:
      <ul style="margin: 8px 0 0 0; padding-left: 20px;">
        <li>Hover tooltips showing exact values</li>
        <li>Click to drill down into data</li>
        <li>Zoom and pan controls</li>
      </ul>
    </div>
  </div>
</body>
</html>
